<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Universo Paralelo Store | Cat√°logo 3D</title>
  <link rel="stylesheet" href="./catalago.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="/public/js/config.js"></script>
  <script src="/public/js/cart.js"></script>
</head>

<body>

  <!-- HEADER -->
  <header class="main-header">
    <nav class="container nav-container">
      <a href="/home.html" class="logo" aria-label="Home Universo Paralelo">UNIVERSO PARALELO</a>

      <ul class="nav-menu">
        <li><a href="/home.html">In√≠cio</a></li>
        <li><a href="/catalogo.html" class="active">Cat√°logo 3D</a></li>
        <li><a href="/servicos.html">Servi√ßos</a></li>
        <li><a href="#footer">Contato</a></li>
      </ul>

      <div class="header-actions">
        <a href="carrinho.html" class="cart-icon">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count">0</span>
        </a>
      </div>
    </nav>
  </header>

  <!-- MAIN -->
  <main class="container">

    <!-- BREADCRUMB -->
    <nav class="breadcrumb reveal">
      <a href="home.html">In√≠cio</a>
      <i class="fas fa-chevron-right"></i>
      <span>Cat√°logo de Produtos</span>
    </nav>

    <!-- INTRO -->
    <header class="catalog-intro reveal">
      <h1>CAT√ÅLOGO DE PRODUTOS 3D</h1>
      <p class="catalog-subtitle">Explore nossa cole√ß√£o de produtos impressos em 3D com qualidade premium e designs
        exclusivos</p>

      <!-- TOOLBAR AVAN√áADA -->
      <section class="toolbar-advanced">
        <div class="toolbar-left">
          <div class="filter-section">
            <button class="filter-toggle" id="filterToggle">
              <i class="fas fa-filter"></i> Filtros Avan√ßados
              <span class="filter-count" id="filterCount">0</span>
            </button>
          </div>

          <div class="view-controls">
            <button class="view-btn active" data-view="grid">
              <i class="fas fa-th-large"></i>
            </button>
            <button class="view-btn" data-view="list">
              <i class="fas fa-list"></i>
            </button>
          </div>
        </div>

        <div class="toolbar-right">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="search" placeholder="Buscar produtos..." class="search-input" id="searchInput">
            <button class="search-clear" id="searchClear" style="display: none;">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="results-info">
            <span class="product-count" id="productCount">Carregando produtos...</span>
          </div>
        </div>
      </section>
    </header>

    <!-- GRID DE PRODUTOS COM PAGINA√á√ÉO -->
    <section class="catalog-content">
      <!-- FILTROS R√ÅPIDOS -->
      <div class="quick-filters reveal" id="quickFilters">
        <button class="quick-filter active" data-category="all">Todos</button>
        <!-- Filtros r√°pidos ser√£o carregados dinamicamente aqui -->
      </div>

      <!-- PRODUTOS -->
      <div class="products-grid catalog-grid" id="productsGrid">
        <div class="loading-products">
          <i class="fas fa-spinner fa-spin fa-2x"></i>
          <p>Conectando ao cat√°logo...</p>
        </div>
      </div>

      <!-- PAGINA√á√ÉO -->
      <div class="pagination reveal" id="pagination" style="display: none;">
        <button class="page-btn prev-btn" id="prevBtn">
          <i class="fas fa-chevron-left"></i> Anterior
        </button>
        <div class="page-numbers" id="pageNumbers">
          <button class="page-number active">1</button>
        </div>
        <button class="page-btn next-btn" id="nextBtn">
          Pr√≥xima <i class="fas fa-chevron-right"></i>
        </button>
        <div class="page-info">
          <span>P√°gina <span id="currentPage">1</span> de <span id="totalPages">1</span></span>
        </div>
      </div>
    </section>

    <!-- CATEGORIAS DESTAQUE -->
    <section class="catalog-categories reveal" id="featuredCategories" style="display: none;">
      <h2 class="section-title">NAVEGUE POR CATEGORIAS</h2>
      <p class="section-subtitle">Encontre exatamente o que voc√™ precisa</p>
      <div class="categories-grid" id="categoriesGrid">
        <!-- Categorias ser√£o carregadas dinamicamente aqui -->
      </div>
    </section>

    <!-- CTA CAT√ÅLOGO -->
    <section class="catalog-cta reveal">
      <div class="cta-content">
        <i class="fas fa-lightbulb cta-icon"></i>
        <h2>N√ÉO ENCONTROU O QUE PROCURAVA?</h2>
        <p>Temos um servi√ßo de cria√ß√£o personalizada! Envie sua ideia e n√≥s a transformaremos em realidade.</p>
        <a href="servicos.html" class="btn-hero">Solicitar Or√ßamento Personalizado</a>
      </div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="main-footer" id="footer">
    <div class="container footer-grid">
      <section class="footer-brand">
        <span class="logo">UNIVERSO PARALELO</span>
        <p>Transformando ideias em objetos atrav√©s da impress√£o 3D com qualidade e criatividade.</p>
        <div class="social-links">
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="#"><i class="fab fa-whatsapp"></i></a>
          <a href="#"><i class="fab fa-tiktok"></i></a>
        </div>
      </section>
      <section>
        <h4>LINKS R√ÅPIDOS</h4>
        <ul class="footer-links">
          <li><a href="home.html">In√≠cio</a></li>
          <li><a href="catalogo.html">Cat√°logo 3D</a></li>
          <li><a href="servicos.html">Servi√ßos</a></li>
          <li><a href="sobre.html">Sobre N√≥s</a></li>
        </ul>
      </section>
      <section>
        <h4>CONTATO</h4>
        <p><i class="fas fa-phone"></i> +55 21 99999-9999</p>
        <p><i class="fas fa-envelope"></i> universoparalelostore@gmail.com</p>
        <p><i class="fas fa-map-marker-alt"></i> Rio de Janeiro, Brasil</p>
      </section>
      <section>
        <h4>NEWSLETTER</h4>
        <p>Inscreva-se para receber novidades e promo√ß√µes</p>
        <form class="newsletter-form">
          <input type="email" placeholder="Seu e-mail" required>
          <button type="submit"><i class="fas fa-paper-plane"></i></button>
        </form>
      </section>
    </div>
    <div class="footer-bottom">
      <p>Universo Paralelo Store ¬© 2023 - Todos os direitos reservados</p>
    </div>
  </footer>

  <!-- MODAL DE FILTROS -->
  <div class="filters-modal" id="filtersModal">
    <div class="filters-modal-content">
      <div class="filters-modal-header">
        <h3><i class="fas fa-sliders-h"></i> Filtros Avan√ßados</h3>
        <button class="filters-close" id="filtersClose"><i class="fas fa-times"></i></button>
      </div>
      <div class="filters-modal-body">
        <!-- Conte√∫do do modal permanece igual -->
      </div>
      <div class="filters-modal-footer">
        <button class="btn-clear-filters" id="clearAllFilters"><i class="fas fa-broom"></i> Limpar Todos</button>
        <div class="filters-actions">
          <button class="btn-cancel-filters" id="cancelFilters">Cancelar</button>
          <button class="btn-apply-filters" id="applyAllFilters"><i class="fas fa-check"></i> Aplicar Filtros</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ========== CONFIGURA√á√ÉO ==========
    const API_BASE_URL = API_CONFIG.BASE_URL;
    const PRODUCTS_PER_PAGE = 9;

    console.log('üéØ Cat√°logo iniciado com API:', API_BASE_URL);
    console.log('üåê Ambiente:', window.location.hostname);

    // ========== VARI√ÅVEIS GLOBAIS ==========
    let allProducts = [];
    let allCategories = [];
    let filteredProducts = [];
    let currentPage = 1;
    let currentFilters = {
      categories: [],
      minPrice: 0,
      maxPrice: 1000,
      sortBy: 'newest',
      searchTerm: '',
      status: ['in_stock']
    };

    // ========== FUN√á√ïES DE API SIMPLIFICADAS ==========
    async function fetchProducts() {
      try {
        console.log("üì• Buscando produtos da API...");

        const url = getApiUrl('/products');
        console.log("üåê URL:", url);

        const response = await fetch(url);

        console.log("üìä Status:", response.status, response.statusText);

        if (!response.ok) {
          throw new Error(`Erro ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();
        console.log("üì¶ Dados recebidos:", data);

        if (data && Array.isArray(data.products)) {
          console.log(`‚úÖ ${data.products.length} produtos carregados`);
          return data.products;
        } else if (Array.isArray(data)) {
          console.log(`‚úÖ ${data.length} produtos carregados`);
          return data;
        } else {
          console.warn("‚ö†Ô∏è Formato inesperado:", data);
          return [];
        }

      } catch (error) {
        console.error("‚ùå Erro ao buscar produtos:", error);
        showErrorUI(`Erro: ${error.message}`);
        return [];
      }
    }

    async function fetchCategories() {
      try {
        console.log("üè∑Ô∏è Buscando categorias da API...");

        const url = getApiUrl('/categories');
        console.log("üåê URL:", url);

        const response = await fetch(url);

        console.log("üìä Status:", response.status);

        if (!response.ok) {
          throw new Error(`Erro ${response.status}`);
        }

        const data = await response.json();
        console.log("üìä Dados categorias:", data);

        if (data && Array.isArray(data.categories)) {
          console.log(`‚úÖ ${data.categories.length} categorias carregadas`);
          return data.categories;
        } else if (Array.isArray(data)) {
          console.log(`‚úÖ ${data.length} categorias carregadas`);
          return data;
        } else {
          console.warn("‚ö†Ô∏è Formato inesperado:", data);
          return [];
        }

      } catch (error) {
        console.error("‚ùå Erro ao buscar categorias:", error);
        return [];
      }
    }

    // ========== INICIALIZA√á√ÉO SIMPLIFICADA ==========
    async function initializeCatalog() {
      console.log("üöÄ Inicializando cat√°logo...");

      try {
        // Mostrar loading
        document.getElementById('productsGrid').innerHTML = `
          <div class="loading-products" style="grid-column: 1 / -1; text-align: center; padding: 60px;">
            <i class="fas fa-spinner fa-spin fa-3x" style="color: #7C3AED; margin-bottom: 20px;"></i>
            <p style="color: #666; font-size: 16px;">Conectando ao cat√°logo...</p>
            <p style="color: #888; font-size: 14px;">API: ${API_BASE_URL}</p>
          </div>
        `;

        // Testar API
        const isConnected = await testApiConnection();
        if (!isConnected) {
          showErrorUI("‚ö†Ô∏è API offline. Tente novamente em alguns segundos.");
          return;
        }

        // Carregar dados
        console.log("üîÑ Carregando dados...");
        const [products, categories] = await Promise.all([
          fetchProducts(),
          fetchCategories()
        ]);

        console.log("üìä Resultados:", {
          produtos: products.length,
          categorias: categories.length
        });

        // Atribuir dados
        allProducts = products;
        allCategories = categories;

        if (allProducts.length === 0) {
          showNoProductsMessage();
          return;
        }

        // Configurar interface
        setupQuickFilters();
        if (allCategories.length > 0) {
          renderFeaturedCategories();
        }
        setupEventListeners();

        // Renderizar
        filteredProducts = [...allProducts];
        renderProducts();

        console.log(`‚úÖ Cat√°logo inicializado com ${allProducts.length} produtos`);

      } catch (error) {
        console.error("‚ùå Erro na inicializa√ß√£o:", error);
        showErrorUI(`Erro: ${error.message}`);
      }
    }

    function loadAllProducts() {
      console.log("üéØ Carregando todos os produtos");

      currentFilters = {
        categories: [],
        minPrice: 0,
        maxPrice: 1000,
        sortBy: 'newest',
        searchTerm: '',
        status: ['in_stock']
      };

      filteredProducts = [...allProducts];
      currentPage = 1;

      const allButton = document.querySelector('.quick-filter[data-category="all"]');
      if (allButton) {
        document.querySelectorAll('.quick-filter').forEach(btn => btn.classList.remove('active'));
        allButton.classList.add('active');
      }

      renderProducts();
    }

    // ========== FUN√á√ïES DE RENDERIZA√á√ÉO ==========
    function setupQuickFilters() {
      const quickFilters = document.getElementById('quickFilters');

      if (!allCategories || allCategories.length === 0) return;

      const allButton = document.querySelector('.quick-filter[data-category="all"]');
      if (allButton) {
        allButton.addEventListener('click', loadAllProducts);
      }

      const existingButtons = quickFilters.querySelectorAll('.quick-filter:not([data-category="all"])');
      existingButtons.forEach(btn => btn.remove());

      const quickCategories = allCategories.slice(0, 6);

      quickCategories.forEach(category => {
        const button = document.createElement('button');
        button.className = 'quick-filter';
        button.dataset.categoryId = category.id;
        button.innerHTML = `<i class="fas fa-tag"></i> ${category.name}`;

        button.addEventListener('click', () => {
          document.querySelectorAll('.quick-filter').forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          currentFilters.categories = [category.id.toString()];
          applyFilters();
        });

        quickFilters.appendChild(button);
      });
    }

    function renderFeaturedCategories() {
      const featuredCategories = document.getElementById('featuredCategories');
      const categoriesGrid = document.getElementById('categoriesGrid');

      if (!allCategories || allCategories.length === 0) return;

      const featured = allCategories.slice(0, 4);

      categoriesGrid.innerHTML = featured.map(category => {
        const productsInCategory = allProducts.filter(product =>
          (product.category_id && product.category_id.toString() === category.id.toString()) ||
          (product.category === category.name)
        ).length;

        return `
          <div class="category-card" data-category-id="${category.id}">
            <div class="category-image">
              <img src="https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="${category.name}">
            </div>
            <div class="category-content">
              <h3>${category.name}</h3>
              <p>${productsInCategory} produto(s)</p>
            </div>
          </div>
        `;
      }).join('');

      featuredCategories.style.display = 'block';

      document.querySelectorAll('.category-card').forEach(card => {
        card.addEventListener('click', () => {
          const categoryId = card.dataset.categoryId;
          document.querySelectorAll('.quick-filter').forEach(btn => {
            if (btn.dataset.categoryId === categoryId) {
              btn.click();
            }
          });
        });
      });
    }

    function renderProducts() {
      const productsGrid = document.getElementById('productsGrid');

      if (filteredProducts.length === 0) {
        productsGrid.innerHTML = `
          <div class="no-products">
            <i class="fas fa-search fa-3x"></i>
            <h3>Nenhum produto encontrado</h3>
            <p>Tente ajustar os filtros</p>
          </div>
        `;
        document.getElementById('pagination').style.display = 'none';
        document.getElementById('productCount').textContent = 'Nenhum produto encontrado';
        return;
      }

      const startIndex = (currentPage - 1) * PRODUCTS_PER_PAGE;
      const endIndex = startIndex + PRODUCTS_PER_PAGE;
      const pageProducts = filteredProducts.slice(startIndex, endIndex);

      productsGrid.innerHTML = '';

      pageProducts.forEach(product => {
        const card = createProductCard(product);
        if (card) productsGrid.appendChild(card);
      });

      updateProductCount();
      updatePagination();
    }

    function createProductCard(product) {
      try {
        const article = document.createElement('article');
        article.className = 'product-card';

        if (product.featured) {
          const badge = document.createElement('span');
          badge.className = 'badge featured';
          badge.textContent = 'Destaque';
          article.appendChild(badge);
        }

        const figure = document.createElement('figure');
        figure.className = 'product-image';

        const img = document.createElement('img');
        img.src = getImageUrl(product.image_url);
        img.alt = product.name;
        img.onerror = function () {
          this.src = 'https://via.placeholder.com/400x400/7C3AED/FFFFFF?text=Imagem+Indispon√≠vel';
        };

        figure.appendChild(img);
        article.appendChild(figure);

        const section = document.createElement('section');
        section.className = 'product-details';

        const headerDiv = document.createElement('div');
        headerDiv.className = 'product-header';

        const title = document.createElement('h3');
        title.className = 'product-title';
        title.textContent = product.name;

        const categoryBadge = document.createElement('span');
        categoryBadge.className = 'product-category-badge';
        categoryBadge.textContent = product.category || 'Sem categoria';

        headerDiv.appendChild(title);
        headerDiv.appendChild(categoryBadge);
        section.appendChild(headerDiv);

        const description = document.createElement('p');
        description.className = 'product-description';
        description.textContent = (product.description || 'Produto impresso em 3D.').substring(0, 80) + '...';
        section.appendChild(description);

        const priceContainer = document.createElement('div');
        priceContainer.className = 'product-price-container';

        const price = document.createElement('div');
        price.className = 'product-price';
        price.textContent = new Intl.NumberFormat('pt-BR', {
          style: 'currency',
          currency: 'BRL'
        }).format(product.price || 0);

        priceContainer.appendChild(price);
        section.appendChild(priceContainer);

        const footer = document.createElement('footer');
        footer.className = 'card-actions';

        const inStock = product.stock > 0 && product.status !== 'inactive';

        const buyBtn = document.createElement('button');
        buyBtn.className = inStock ? 'btn-primary' : 'btn-primary disabled';
        buyBtn.disabled = !inStock;

        const cartIcon = document.createElement('i');
        cartIcon.className = 'fas fa-shopping-cart';

        buyBtn.appendChild(cartIcon);
        buyBtn.appendChild(document.createTextNode(inStock ? ' Comprar' : ' Esgotado'));
        buyBtn.onclick = () => addToCart(product.id);

        const detailsBtn = document.createElement('button');
        detailsBtn.className = 'btn-secondary';

        const eyeIcon = document.createElement('i');
        eyeIcon.className = 'fas fa-eye';

        detailsBtn.appendChild(eyeIcon);
        detailsBtn.appendChild(document.createTextNode(' Detalhes'));
        detailsBtn.onclick = () => viewProductDetails(product.id);

        footer.appendChild(buyBtn);
        footer.appendChild(detailsBtn);
        section.appendChild(footer);

        article.appendChild(section);
        return article;

      } catch (error) {
        console.error('‚ùå Erro ao criar card:', error);
        return null;
      }
    }

    // ========== FUN√á√ïES AUXILIARES ==========
    function showErrorUI(message) {
      document.getElementById('productsGrid').innerHTML = `
        <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
          <i class="fas fa-exclamation-triangle fa-3x" style="color: #f44336;"></i>
          <h3 style="margin: 20px 0; color: #666;">Erro ao carregar</h3>
          <p style="color: #888; margin-bottom: 20px;">${message}</p>
          <button onclick="initializeCatalog()" style="padding: 10px 20px; background: #7C3AED; color: white; border: none; border-radius: 8px; cursor: pointer;">
            <i class="fas fa-sync-alt"></i> Tentar novamente
          </button>
        </div>
      `;
    }

    function showNoProductsMessage() {
      document.getElementById('productsGrid').innerHTML = `
        <div style="grid-column: 1/-1; text-align: center; padding: 60px;">
          <i class="fas fa-box-open fa-3x" style="color: #ddd;"></i>
          <h3 style="margin: 20px 0; color: #666;">Nenhum produto dispon√≠vel</h3>
          <p style="color: #888;">O cat√°logo est√° vazio no momento.</p>
        </div>
      `;
      document.getElementById('productCount').textContent = '0 produtos encontrados';
    }

    function applyFilters() {
      filteredProducts = [...allProducts];

      if (currentFilters.searchTerm) {
        const searchTerm = currentFilters.searchTerm.toLowerCase();
        filteredProducts = filteredProducts.filter(product =>
          product.name.toLowerCase().includes(searchTerm) ||
          (product.description && product.description.toLowerCase().includes(searchTerm))
        );
      }

      if (currentFilters.categories.length > 0) {
        filteredProducts = filteredProducts.filter(product =>
          currentFilters.categories.includes(product.category_id?.toString())
        );
      }

      filteredProducts = filteredProducts.filter(product => {
        const price = product.price || 0;
        return price >= currentFilters.minPrice && price <= currentFilters.maxPrice;
      });

      filteredProducts.sort((a, b) => {
        switch (currentFilters.sortBy) {
          case 'price_asc': return (a.price || 0) - (b.price || 0);
          case 'price_desc': return (b.price || 0) - (a.price || 0);
          case 'name_asc': return a.name.localeCompare(b.name);
          case 'name_desc': return b.name.localeCompare(a.name);
          default: return new Date(b.created_at || 0) - new Date(a.created_at || 0);
        }
      });

      currentPage = 1;
      renderProducts();
    }

    function updatePagination() {
      const totalPages = Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE);

      document.getElementById('totalPages').textContent = totalPages;
      document.getElementById('currentPage').textContent = currentPage;

      const pageNumbers = document.getElementById('pageNumbers');
      pageNumbers.innerHTML = '';

      if (totalPages <= 1) {
        document.getElementById('pagination').style.display = 'none';
        return;
      }

      document.getElementById('pagination').style.display = 'flex';

      for (let i = 1; i <= totalPages; i++) {
        const button = document.createElement('button');
        button.className = `page-number ${i === currentPage ? 'active' : ''}`;
        button.textContent = i;
        button.addEventListener('click', () => goToPage(i));
        pageNumbers.appendChild(button);
      }

      document.getElementById('prevBtn').disabled = currentPage === 1;
      document.getElementById('nextBtn').disabled = currentPage === totalPages;
    }

    function goToPage(page) {
      if (page < 1 || page > Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE)) return;

      currentPage = page;
      renderProducts();
    }

    function updateProductCount() {
      const total = filteredProducts.length;
      const totalPages = Math.ceil(total / PRODUCTS_PER_PAGE);

      let text = '';
      if (total === 0) {
        text = 'Nenhum produto encontrado';
      } else if (totalPages > 1) {
        text = `${total} produto(s) - P√°gina ${currentPage} de ${totalPages}`;
      } else {
        text = `${total} produto(s) encontrado(s)`;
      }

      document.getElementById('productCount').textContent = text;
    }

    function viewProductDetails(productId) {
      window.location.href = `detalhes-produto.html?id=${productId}`;
    }

    async function addToCart(productId) {
      console.log("üõí Adicionando ao carrinho:", productId);
      showNotification('Produto adicionado ao carrinho!', 'success');
      // Implementa√ß√£o do carrinho aqui
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#4CAF50' : '#2196F3'};
        color: white;
        padding: 15px 25px;
        border-radius: 8px;
        z-index: 10000;
        animation: slideIn 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      `;

      notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
        <span style="margin-left: 10px;">${message}</span>
      `;

      document.body.appendChild(notification);

      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    function setupEventListeners() {
      document.getElementById('prevBtn').addEventListener('click', () => {
        if (currentPage > 1) goToPage(currentPage - 1);
      });

      document.getElementById('nextBtn').addEventListener('click', () => {
        const totalPages = Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE);
        if (currentPage < totalPages) goToPage(currentPage + 1);
      });

      const searchInput = document.getElementById('searchInput');
      let searchTimeout;
      searchInput.addEventListener('input', function (e) {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          currentFilters.searchTerm = e.target.value;
          applyFilters();
        }, 500);
      });

      document.querySelectorAll('.view-btn').forEach(btn => {
        btn.addEventListener('click', function () {
          document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          const view = this.dataset.view;
          document.getElementById('productsGrid').className = `products-grid ${view}-view`;
        });
      });
    }

    function setupScrollAnimation() {
      const revealElements = document.querySelectorAll('.reveal');

      function revealOnScroll() {
        const windowHeight = window.innerHeight;
        const revealPoint = 100;

        revealElements.forEach(element => {
          const revealTop = element.getBoundingClientRect().top;
          if (revealTop < windowHeight - revealPoint) {
            element.classList.add('active');
          }
        });
      }

      window.addEventListener('scroll', revealOnScroll);
      revealOnScroll();
    }

    // ========== INICIALIZA√á√ÉO ==========
    document.addEventListener('DOMContentLoaded', function () {
      console.log("‚úÖ DOM carregado");
      initializeCatalog();
      setupScrollAnimation();
    });

    // Adicione essas fun√ß√µes se precisar do modal de filtros
    function setupFiltersModal() {
      // Implementa√ß√£o b√°sica se precisar
      console.log("üîß Modal de filtros configurado");
    }

    function updateFiltersCount() {
      // Implementa√ß√£o b√°sica
      document.getElementById('filterCount').textContent = '0';
    }
  </script>

</body>

</html>